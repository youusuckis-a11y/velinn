<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Portfolio — MARVELINO ALFRADO</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <style>
      :root {
        --bg: #031018; /* very dark teal/blue */
        --card: #0b1720; /* card dark */
        --blue: #0b63ff; /* bright blue */
        --tosca: #1abc9c; /* tosca */
        --glow: rgba(11, 99, 255, 0.18);
        --muted: #98a0b3;
        --glass: rgba(255, 255, 255, 0.03);
        --radius: 14px;
        --container: 1100px;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        margin: 0;
        font-family: "Inter", system-ui, Segoe UI, Roboto, Arial;
        background: linear-gradient(180deg, var(--bg), #02131a 70%);
        color: #e9f6f9;
        -webkit-font-smoothing: antialiased;
      }
      a {
        color: inherit;
        text-decoration: none;
      }
      .wrap {
        max-width: var(--container);
        margin: 36px auto;
        padding: 0 20px;
      }

      /* NAV */
      header {
        position: sticky;
        top: 12px;
        z-index: 40;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 18px;
        background: transparent;
      }
      .brand {
        display: flex;
        gap: 12px;
        align-items: center;
      }
      .logo {
        width: 52px;
        height: 52px;
        border-radius: 12px;
        background: linear-gradient(135deg, var(--blue), var(--tosca));
        display: grid;
        place-items: center;
        font-weight: 800;
        color: #021217;
        box-shadow: 0 10px 40px rgba(26, 188, 156, 0.06);
      }
      nav {
        display: flex;
        gap: 18px;
        align-items: center;
      }
      nav a {
        color: #cfeef3;
        font-weight: 600;
        padding: 8px 6px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.02);
      }
      nav a:hover {
        color: var(--tosca);
        transform: translateY(-2px);
      }
      .cta {
        background: linear-gradient(90deg, var(--blue), var(--tosca));
        color: #021217;
        padding: 10px 14px;
        border-radius: 10px;
        border: none;
        font-weight: 700;
        cursor: pointer;
        box-shadow: 0 10px 30px rgba(26, 188, 156, 0.08);
      }

      /* HERO */
      .hero {
        display: grid;
        grid-template-columns: 1fr 420px;
        gap: 30px;
        align-items: center;
        padding: 56px 6px 30px;
      }
      .hero-left {
        max-width: 640px;
      }
      .eyebrow {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 8px;
      }
      h1 {
        font-size: 44px;
        line-height: 1.02;
        margin: 6px 0 8px;
      }

      /* name highlight neon + glitch */
      .name-highlight {
        background: linear-gradient(90deg, var(--blue), var(--tosca));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        font-weight: 900;
        position: relative;
        display: inline-block;
        animation: neonFlicker 2.6s infinite alternate;
      }
      @keyframes neonFlicker {
        0%,
        18%,
        22%,
        25%,
        53%,
        57%,
        100% {
          text-shadow: 0 0 4px rgba(11, 99, 255, 0.9),
            0 0 10px rgba(11, 99, 255, 0.6), 0 0 22px rgba(26, 188, 156, 0.12);
        }
        20%,
        24%,
        55% {
          text-shadow: none;
        }
      }
      .name-highlight::before,
      .name-highlight::after {
        content: attr(data-text);
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        opacity: 0.85;
      }
      .name-highlight::before {
        transform: translateX(-2px);
        color: rgba(255, 0, 255, 0.85);
        mix-blend-mode: screen;
        clip-path: polygon(0 0, 100% 0, 100% 65%, 0 60%);
        animation: glitchA 2s infinite linear alternate-reverse;
      }
      .name-highlight::after {
        transform: translateX(2px);
        color: rgba(0, 255, 255, 0.75);
        mix-blend-mode: screen;
        clip-path: polygon(0 35%, 100% 40%, 100% 100%, 0 100%);
        animation: glitchB 2.2s infinite linear alternate-reverse;
      }
      @keyframes glitchA {
        0% {
          transform: translateX(-2px) translateY(0);
        }
        50% {
          transform: translateX(-14px) translateY(-6px);
        }
        100% {
          transform: translateX(-2px) translateY(0);
        }
      }
      @keyframes glitchB {
        0% {
          transform: translateX(2px) translateY(0);
        }
        50% {
          transform: translateX(12px) translateY(6px);
        }
        100% {
          transform: translateX(2px) translateY(0);
        }
      }

      .subtitle {
        color: var(--muted);
        margin-bottom: 18px;
      }
      .socials {
        display: flex;
        gap: 10px;
        margin: 18px 0;
      }
      .socials a {
        display: inline-grid;
        place-items: center;
        width: 44px;
        height: 44px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.04);
        background: transparent;
        color: var(--tosca);
        transition: transform 220ms;
      }
      .socials a:hover {
        transform: translateY(-6px) scale(1.05) rotate(-6deg);
      }

      .btn-row {
        display: flex;
        gap: 12px;
        align-items: center;
      }
      .btn-primary {
        background: linear-gradient(90deg, var(--blue), var(--tosca));
        color: #021217;
        padding: 12px 18px;
        border-radius: 12px;
        font-weight: 700;
        box-shadow: 0 14px 40px rgba(11, 99, 255, 0.12);
      }
      .btn-ghost {
        padding: 10px 14px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.04);
        color: var(--muted);
      }

      /* hero image neon */
      .hero-right {
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
      }
      .avatar-wrap {
        width: 300px;
        height: 300px;
        border-radius: 999px;
        display: grid;
        place-items: center;
        position: relative;
        perspective: 1000px;
      }
      .avatar-glow {
        position: absolute;
        inset: -18px;
        border-radius: 999px;
        background: radial-gradient(
            circle at 30% 30%,
            rgba(26, 188, 156, 0.18),
            transparent 35%
          ),
          radial-gradient(
            circle at 70% 70%,
            rgba(11, 99, 255, 0.14),
            transparent 35%
          );
        filter: blur(18px);
        z-index: 0;
        transition: transform 400ms ease;
      }
      .avatar {
        width: 260px;
        height: 260px;
        border-radius: 999px;
        overflow: hidden;
        border: 6px solid rgba(255, 255, 255, 0.04);
        background: #f4f9fa;
        z-index: 2;
        display: flex;
        align-items: center;
        justify-content: center;
        will-change: transform;
        transition: transform 450ms cubic-bezier(0.2, 0.9, 0.2, 1);
      }
      .avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }
      .badge {
        position: absolute;
        right: -6px;
        bottom: 6px;
        background: linear-gradient(90deg, var(--blue), var(--tosca));
        color: #021217;
        padding: 8px;
        border-radius: 16px;
        box-shadow: 0 8px 26px rgba(11, 99, 255, 0.12);
        z-index: 3;
      }

      /* layout */
      .two-col {
        display: grid;
        grid-template-columns: 360px 1fr;
        gap: 26px;
        margin-top: 22px;
      }
      .card {
        background: var(--card);
        border-radius: 14px;
        padding: 18px;
        border: 1px solid rgba(255, 255, 255, 0.03);
        box-shadow: 0 8px 40px rgba(0, 0, 0, 0.6);
      }

      /* reveal utility */
      .reveal {
        opacity: 0;
        transform: translateY(18px);
        transition: opacity 700ms cubic-bezier(0.2, 0.9, 0.2, 1),
          transform 700ms cubic-bezier(0.2, 0.9, 0.2, 1);
        will-change: opacity, transform;
      }
      .reveal.revealed {
        opacity: 1;
        transform: none;
      }

      /* technical skills */
      .skills-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
      .skill-item {
        margin-bottom: 14px;
      }
      .skill-title {
        display: flex;
        justify-content: space-between;
        font-weight: 700;
        margin-bottom: 8px;
        font-size: 14px;
        color: #dff7fb;
      }
      .prog {
        height: 12px;
        background: rgba(255, 255, 255, 0.04);
        border-radius: 999px;
        overflow: hidden;
      }
      .prog > span {
        display: block;
        height: 100%;
        background: linear-gradient(90deg, var(--blue), var(--tosca));
        width: 0%;
        transition: width 1s ease;
      }

      /* circles */
      .circles {
        display: flex;
        gap: 18px;
        flex-wrap: wrap;
        justify-content: center;
      }
      .circle {
        width: 120px;
        height: 120px;
        border-radius: 999px;
        display: grid;
        place-items: center;
        background: conic-gradient(
          var(--tosca) 0deg,
          var(--tosca) 0deg,
          rgba(255, 255, 255, 0.04) 0deg
        );
        position: relative;
      }
      .circle .num {
        font-weight: 800;
      }
      .circle small {
        position: absolute;
        bottom: -20px;
        font-size: 13px;
        color: var(--muted);
      }

      /* gallery */
      .gallery {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        justify-content: center;
      }
      .gal-item {
        width: calc(33.333% - 8px);
        min-width: 150px;
        border-radius: 12px;
        overflow: hidden;
        cursor: pointer;
        box-shadow: 0 8px 30px rgba(2, 6, 23, 0.6);
        transform-origin: center;
        transition: transform 280ms cubic-bezier(0.2, 0.9, 0.2, 1),
          box-shadow 240ms;
        will-change: transform;
      }
      .gal-item:hover {
        transform: perspective(700px) translateZ(6px) scale(1.04);
        box-shadow: 0 20px 60px rgba(11, 99, 255, 0.18);
      }
      .gal-item img {
        width: 100%;
        height: 160px;
        object-fit: cover;
        display: block;
      }

      /* footer/contact */
      .contact-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 18px;
      }
      label {
        display: block;
        font-size: 13px;
        color: var(--muted);
        margin-bottom: 6px;
      }
      input,
      textarea {
        width: 100%;
        padding: 10px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.04);
        background: transparent;
        color: #e9f6f9;
      }
      textarea {
        min-height: 120px;
        resize: vertical;
      }
      .submit {
        background: linear-gradient(90deg, var(--blue), var(--tosca));
        color: #021217;
        padding: 12px 16px;
        border-radius: 10px;
        border: none;
        font-weight: 700;
      }

      /* timeline / experience */
      .timeline {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-top: 8px;
      }
      .timeline-item {
        display: flex;
        gap: 16px;
        align-items: flex-start;
      }
      .timeline-date {
        min-width: 120px;
        color: var(--muted);
        font-weight: 700;
        font-size: 14px;
      }
      .timeline-body {
        max-width: calc(100% - 140px);
      }
      .timeline-body h4 {
        margin: 0 0 6px 0;
        font-size: 16px;
      }
      .timeline-body p {
        margin: 0;
        color: var(--muted);
        font-size: 14px;
        line-height: 1.45;
      }

      /* lightbox */
      .lightbox {
        position: fixed;
        inset: 0;
        display: none;
        place-items: center;
        background: rgba(0, 0, 0, 0.85);
        z-index: 400;
        padding: 20px;
      }
      .lightbox img {
        max-width: 92%;
        max-height: 92%;
        border-radius: 12px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
      }
      .lb-close {
        position: absolute;
        right: 18px;
        top: 18px;
        background: transparent;
        border: none;
        color: #fff;
        font-size: 28px;
        padding: 6px 10px;
        cursor: pointer;
      }

      /* top button */
      .top-btn {
        position: fixed;
        right: 20px;
        bottom: 20px;
        background: linear-gradient(90deg, var(--blue), var(--tosca));
        color: #021217;
        width: 44px;
        height: 44px;
        border-radius: 10px;
        display: inline-grid;
        place-items: center;
        text-decoration: none;
        box-shadow: 0 12px 40px rgba(11, 99, 255, 0.12);
        opacity: 0;
        transform: translateY(6px);
        transition: opacity 0.25s, transform 0.25s;
        z-index: 50;
      }

      /* tags */
      .tag {
        padding: 8px 10px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.02);
        display: inline-block;
      }

      /* responsive */
      @media (max-width: 900px) {
        .hero {
          grid-template-columns: 1fr;
          padding: 28px 6px;
        }
        .two-col {
          grid-template-columns: 1fr;
        }
        .gal-item {
          width: calc(50% - 8px);
        }
        .timeline-item {
          flex-direction: column;
          gap: 8px;
        }
        .timeline-date {
          min-width: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <!-- NAV -->
      <header>
        <div class="brand">
          <div class="logo">MA</div>
          <div>
            <div style="font-weight: 800">MARVELINO ALFRADO</div>
            <div style="font-size: 12px; color: var(--muted)">
              Web Developer • Surabaya
            </div>
          </div>
        </div>

        <nav>
          <a href="#home">Home</a>
          <a href="#about">About</a>
          <a href="#experience">Experience</a>
          <a href="#skills">Skills</a>
          <a href="#portfolio">Portfolio</a>
          <a href="#contact">Contact</a>
          <button class="cta" onclick="downloadCV()">Unduh CV</button>
        </nav>
      </header>

      <!-- HERO -->
      <section id="home" class="hero" aria-label="home">
        <div class="hero-left">
          <div class="eyebrow">Portfolio</div>
          <h1>Hello, It's Me</h1>

          <h1>
            <span class="name-highlight" data-text="MARVELINO ALFRADO"
              >MARVELINO ALFRADO</span
            >
          </h1>
          <h3 class="subtitle">
            And I am a
            <span style="color: var(--tosca); font-weight: 800"
              >Web Developer</span
            >
          </h3>

          <p class="subtitle">
            Saya membuat website modern, cepat, dan estetis. Spesialis
            front-end, UI/UX, dan pembuatan pengalaman pengguna yang
            menyenangkan.
          </p>

          <div class="socials" aria-hidden="false">
            <a href="#" title="Whatsapp"
              ><i class="fa-brands fa-whatsapp"></i
            ></a>
            <a href="#" title="Instagram"
              ><i class="fa-brands fa-instagram"></i
            ></a>
            <a href="#" title="Github"><i class="fa-brands fa-github"></i></a>
            <a href="#" title="LinkedIn"
              ><i class="fa-brands fa-linkedin"></i
            ></a>
          </div>

          <div class="btn-row">
            <a class="btn-primary" href="#about">More About Me</a>
            <a class="btn-ghost" href="#portfolio">My Work</a>
          </div>
        </div>

        <div class="hero-right" aria-hidden="false">
          <div class="avatar-wrap">
            <div class="avatar-glow" aria-hidden="true"></div>
            <div class="avatar">
              <img src="FOTO/foto5.jpeg" alt="Foto Marvelino" />
            </div>
            <div class="badge">Available</div>
          </div>
        </div>
      </section>

      <!-- TWO COLUMN: sidebar + main -->
      <div class="two-col">
        <!-- SIDEBAR -->
        <aside class="card reveal" id="about" aria-labelledby="about-title">
          <h3 id="about-title" style="margin-bottom: 8px">About Me</h3>
          <p style="color: var(--muted)">
            Perkenalkan saya Marvelino — saya membuat antarmuka yang ramah
            pengguna dan performa yang baik. Saya suka desain yang sederhana
            namun elegan.
          </p>

          <hr style="opacity: 0.06; margin: 16px 0" />

          <h4 style="margin-bottom: 8px">Contact</h4>
          <div style="color: var(--muted); font-weight: 700">
            +62 81998011501
          </div>
          <div style="color: var(--muted); margin-top: 6px">
            email@marvelinoo.com
          </div>

          <hr style="opacity: 0.06; margin: 16px 0" />

          <h4 style="margin-bottom: 8px">Tools & Tech</h4>
          <div style="display: flex; flex-wrap: wrap; gap: 8px">
            <span class="tag">HTML</span>
            <span class="tag">CSS</span>
            <span class="tag">JavaScript</span>
            <span class="tag">React</span>
          </div>
        </aside>

        <!-- MAIN -->
        <main>
          <!-- EXPERIENCE -->
          <section
            class="card reveal"
            id="experience"
            aria-labelledby="exp-title"
            style="margin-bottom: 18px"
          >
            <h3 id="exp-title">Experience</h3>
            <p style="color: var(--muted); margin-top: 6px">
              Beberapa pengalaman kerja / proyek penting saya.
            </p>

            <div class="timeline" style="margin-top: 12px">
              <div class="timeline-item">
                <div class="timeline-date">2023 — Sekarang</div>
                <div class="timeline-body">
                  <h4>Freelance Web Developer</h4>
                  <p>
                    Mengerjakan proyek website klien (landing page, company
                    profile, e-commerce kecil), optimasi performa, dan UI/UX.
                  </p>
                </div>
              </div>

              <div class="timeline-item">
                <div class="timeline-date">2022 — 2023</div>
                <div class="timeline-body">
                  <h4>UI Designer (Kontrak)</h4>
                  <p>
                    Mendesain mockup dan prototipe untuk aplikasi mobile,
                    membuat desain system sederhana.
                  </p>
                </div>
              </div>

              <div class="timeline-item">
                <div class="timeline-date">2021 — 2022</div>
                <div class="timeline-body">
                  <h4>Junior Front-end</h4>
                  <p>
                    Mengembangkan fitur front-end dengan HTML/CSS/JS,
                    mengoptimasi bundle dan waktu muat.
                  </p>
                </div>
              </div>
            </div>
          </section>

          <!-- SKILLS -->
          <section
            class="card reveal"
            id="skills"
            aria-labelledby="skills-title"
          >
            <h3 id="skills-title">Skills</h3>
            <div class="skills-row" style="margin-top: 14px">
              <div>
                <h4 style="margin-bottom: 10px">Technical Skills</h4>
                <div class="skill-item">
                  <div class="skill-title">
                    <div>HTML</div>
                    <div>90%</div>
                  </div>
                  <div class="prog"><span data-width="90%"></span></div>
                </div>
                <div class="skill-item">
                  <div class="skill-title">
                    <div>CSS</div>
                    <div>80%</div>
                  </div>
                  <div class="prog"><span data-width="80%"></span></div>
                </div>
                <div class="skill-item">
                  <div class="skill-title">
                    <div>JavaScript</div>
                    <div>60%</div>
                  </div>
                  <div class="prog"><span data-width="60%"></span></div>
                </div>
                <div class="skill-item">
                  <div class="skill-title">
                    <div>Python</div>
                    <div>50%</div>
                  </div>
                  <div class="prog"><span data-width="50%"></span></div>
                </div>
              </div>

              <div>
                <h4 style="margin-bottom: 10px">Professional Skills</h4>
                <div style="margin-top: 6px" class="circles">
                  <div>
                    <div class="circle" data-percent="90">
                      <div class="num">90%</div>
                    </div>
                    <small>Creativity</small>
                  </div>
                  <div>
                    <div class="circle" data-percent="80">
                      <div class="num">80%</div>
                    </div>
                    <small>Communication</small>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- PORTFOLIO / GALLERY -->
          <section class="card reveal" id="portfolio" style="margin-top: 18px">
            <h3>Portfolio</h3>
            <p style="color: var(--muted); margin-top: 8px">
              Beberapa contoh pekerjaan dan desain.
            </p>

            <div class="gallery" style="margin-top: 12px">
              <div class="gal-item" tabindex="0" data-src="FOTO/foto1.jpg">
                <img src="FOTO/foto6.jpeg" alt="Project 1" />
              </div>
              <div class="gal-item" tabindex="0" data-src="FOTO/foto2.jpg">
                <img src="FOTO/foto4.jpeg" alt="Project 2" />
              </div>
              <div class="gal-item" tabindex="0" data-src="FOTO/foto3.jpg">
                <img src="FOTO/foto3.jpeg" alt="Project 3" />
              </div>
            </div>
          </section>

          <!-- CONTACT -->
          <section class="card reveal" id="contact" style="margin-top: 18px">
            <h3>Contact</h3>
            <p style="color: var(--muted)">
              Tinggalkan pesan — ini hanya contoh formulir (tidak mengirim tanpa
              backend).
            </p>

            <form
              onsubmit="event.preventDefault(); alert('Terima kasih! (form ini demo — tambahkan backend untuk kirim)');"
              style="margin-top: 12px"
              class="contact-grid"
            >
              <div>
                <label for="name">Nama</label
                ><input id="name" required placeholder="Nama kamu" />
              </div>
              <div>
                <label for="email">Email</label
                ><input
                  id="email"
                  type="email"
                  required
                  placeholder="marvelinoo.com@gemail"
                />
              </div>
              <div style="grid-column: 1 / -1">
                <label for="message">Pesan</label
                ><textarea
                  id="message"
                  required
                  placeholder="Tulis pesan..."
                ></textarea>
                <div style="margin-top: 10px; text-align: right">
                  <button class="submit">Kirim Pesan</button>
                </div>
              </div>
            </form>
          </section>
        </main>
      </div>
      <!-- two-col -->

      <footer
        style="
          margin-top: 26px;
          text-align: center;
          color: var(--muted);
          font-size: 13px;
          padding-bottom: 40px;
        "
      >
        © <span id="year"></span> — MARVELINO ALFRADO • Tema Hitam • Biru •
        Tosca
      </footer>
    </div>
    <!-- wrap -->

    <!-- TOP BTN -->
    <a href="#home" class="top-btn" id="topBtn" title="Kembali ke atas"
      ><i class="fa fa-arrow-up"></i
    ></a>

    <!-- LIGHTBOX -->
    <div id="lightbox" class="lightbox" aria-hidden="true">
      <button id="lbClose" class="lb-close" aria-label="Tutup">&times;</button>
      <img id="lbImg" src="" alt="Preview" />
    </div>

    <script>
      // ======== Basic helpers ========
      document.getElementById("year").textContent = new Date().getFullYear();

      // Smooth scroll for nav links
      document.querySelectorAll("nav a").forEach((a) => {
        a.addEventListener("click", (e) => {
          e.preventDefault();
          const href = a.getAttribute("href");
          if (!href || href === "#") return;
          const target = document.querySelector(href);
          if (target)
            target.scrollIntoView({ behavior: "smooth", block: "start" });
        });
      });

      // ======== Reveal on scroll ========
      const revealTargets = document.querySelectorAll(
        ".reveal, .hero-right, .hero-left > *:not(.eyebrow)"
      );
      if (window.IntersectionObserver) {
        const revealObserver = new IntersectionObserver(
          (entries, obs) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("revealed");
                obs.unobserve(entry.target);
              }
            });
          },
          { threshold: 0.15 }
        );
        revealTargets.forEach((t) => revealObserver.observe(t));
      } else {
        revealTargets.forEach((t) => t.classList.add("revealed"));
      }

      // ======== Animate bars and circles ========
      function animateBarsAndCircles() {
        document.querySelectorAll(".prog > span").forEach((el, i) => {
          const width = el.getAttribute("data-width") || el.style.width || "0%";
          setTimeout(() => {
            el.style.width = width;
          }, i * 110);
        });
        document.querySelectorAll(".circle").forEach((c, i) => {
          setTimeout(() => {
            const p = parseInt(c.dataset.percent || "0", 10);
            c.style.background = `conic-gradient(var(--tosca) 0deg ${
              p * 3.6
            }deg, rgba(255,255,255,0.04) ${p * 3.6}deg 360deg)`;
            const num = c.querySelector(".num");
            if (num) {
              let start = 0;
              const dur = 700;
              const steps = Math.max(10, Math.floor(dur / 16));
              const stepTime = dur / steps;
              const delta = p / steps;
              const t = setInterval(() => {
                start = Math.min(p, Math.round(start + delta));
                num.textContent = start + "%";
                if (start >= p) clearInterval(t);
              }, stepTime);
            }
          }, i * 160);
        });
      }
      const skillsSection = document.getElementById("skills");
      if (skillsSection && window.IntersectionObserver) {
        const io2 = new IntersectionObserver(
          (entries, obs) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                animateBarsAndCircles();
                obs.disconnect();
              }
            });
          },
          { threshold: 0.25 }
        );
        io2.observe(skillsSection);
      } else {
        animateBarsAndCircles();
      }

      // ======== Gallery tilt + hover behavior ========
      document.querySelectorAll(".gal-item").forEach((item) => {
        item.addEventListener("mousemove", (e) => {
          const rect = item.getBoundingClientRect();
          const x = (e.clientX - rect.left) / rect.width - 0.5;
          const y = (e.clientY - rect.top) / rect.height - 0.5;
          const rx = y * -8; // rotateX
          const ry = x * 8; // rotateY
          item.style.transform = `perspective(700px) rotateX(${rx}deg) rotateY(${ry}deg) scale(1.04)`;
        });
        item.addEventListener("mouseleave", () => {
          item.style.transform = "none";
        });
        item.addEventListener("keydown", (e) => {
          if (e.key === "Enter") item.click();
        });
      });

      // ======== Lightbox (robust) ========
      const lightbox = document.getElementById("lightbox");
      const lbImg = document.getElementById("lbImg");
      const lbCloseBtn = document.getElementById("lbClose");

      function openLightbox(src) {
        if (lightbox && lbImg) {
          lbImg.src = src || "";
          lightbox.style.display = "grid";
          lightbox.setAttribute("aria-hidden", "false");
          if (lbCloseBtn) lbCloseBtn.focus();
        }
      }
      function closeLightbox() {
        if (lightbox) {
          lightbox.style.display = "none";
          lightbox.setAttribute("aria-hidden", "true");
          if (lbImg) lbImg.src = "";
        }
      }

      document.querySelectorAll(".gal-item").forEach((it) => {
        it.addEventListener("click", () => {
          const src = it.dataset.src || it.querySelector("img")?.src;
          openLightbox(src);
        });
      });
      if (lbCloseBtn) lbCloseBtn.addEventListener("click", closeLightbox);
      if (lightbox)
        lightbox.addEventListener("click", (e) => {
          if (e.target === lightbox) closeLightbox();
        });
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeLightbox();
      });

      // ======== Avatar parallax & idle float ========
      const avatarWrap = document.querySelector(".avatar-wrap");
      const avatar = document.querySelector(".avatar");
      const glow = document.querySelector(".avatar-glow");
      if (avatarWrap && avatar && glow) {
        avatarWrap.addEventListener("mousemove", (e) => {
          const rect = avatarWrap.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          const centerX = rect.width / 2;
          const centerY = rect.height / 2;
          const rotateX = (y - centerY) / 20;
          const rotateY = (centerX - x) / 20;
          avatar.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.04)`;
          glow.style.transform = `translate(${(x - centerX) / 10}px, ${
            (y - centerY) / 10
          }px)`;
        });
        avatarWrap.addEventListener("mouseleave", () => {
          avatar.style.transform = "";
          glow.style.transform = "";
        });
      }

      // ======== Top button reveal ========
      const topBtn = document.getElementById("topBtn");
      window.addEventListener("scroll", () => {
        if (!topBtn) return;
        if (window.scrollY > 300) {
          topBtn.style.opacity = 1;
          topBtn.style.transform = "translateY(0)";
        } else {
          topBtn.style.opacity = 0;
          topBtn.style.transform = "translateY(6px)";
        }
      });

      // ======== Download CV (kept safe) ========
      function downloadCV() {
        const pdfUrl = "CV_Marvelino.pdf";
        // try to open pdf if exists; fallback to tiny text CV
        fetch(pdfUrl, { method: "HEAD" })
          .then((res) => {
            if (res.ok) window.open(pdfUrl, "_blank");
            else {
              const cvText = `MARVELINO ALFRADO\nFreelance Web Developer\nKontak: +62 81998011501\nEmail: email@marvelinoo.com\n`;
              const blob = new Blob([cvText], { type: "text/plain" });
              const url = URL.createObjectURL(blob);
              const a = document.createElement("a");
              a.href = url;
              a.download = "CV-MARVELINO-ALFRADO.txt";
              document.body.appendChild(a);
              a.click();
              document.body.removeChild(a);
              URL.revokeObjectURL(url);
            }
          })
          .catch(() => {
            const cvText = `MARVELINO ALFRADO\nFreelance Web Developer\nKontak: +62 81998011501\nEmail: email@marvelinoo.com\n`;
            const blob = new Blob([cvText], { type: "text/plain" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "CV-MARVELINO-ALFRADO.txt";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
          });
      }
      window.downloadCV = downloadCV;

      // Respect reduced motion
      if (
        window.matchMedia &&
        window.matchMedia("(prefers-reduced-motion: reduce)").matches
      ) {
        document
          .querySelectorAll(".avatar.float-idle, .badge.pulse")
          .forEach((n) => (n.style.animation = "none"));
        document.querySelectorAll(".reveal").forEach((n) => {
          n.style.transition = "none";
          n.classList.add("revealed");
        });
      }
    </script>
  </body>
</html>
